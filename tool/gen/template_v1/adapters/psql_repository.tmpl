package adapters

import (
	"database/sql"
	"fmt"
	"github.com/volatiletech/sqlboiler/v4/boil"
	"{{.Module}}/internal/{{.Domain}}/domain"
)

type PSQL{{.DomainTitle}}Repository struct {
}

func NewPSQL{{.DomainTitle}}Repository() domain.{{.DomainTitle}}Repository {
	return &PSQL{{.DomainTitle}}Repository{}
}

func (repo *PSQL{{.DomainTitle}}Repository) Create({{.Domain}} *domain.{{.DomainTitle}}) (*domain.{{.DomainTitle}},error)  {
	orm{{.DomainTitle}} := domain{{.DomainTitle}}ToORM({{.Domain}})

	if err := orm{{.DomainTitle}}.InsertG(boil.Infer()); err != nil {
		return nil, err
	}

	return orm{{.DomainTitle}}ToDomain(orm{{.DomainTitle}}), nil
}
