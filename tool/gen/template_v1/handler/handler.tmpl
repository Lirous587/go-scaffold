package handler

import (
    "{{.Module}}/internal/{{.Domain}}/domain"
    "github.com/gin-gonic/gin"
    "github.com/pkg/errors"
    "strconv"
)

type HttpHandler struct {
    service domain.{{.DomainTitle}}Service
}

func NewHttpHandler(service domain.{{.DomainTitle}}Service) *HttpHandler {
    return &HttpHandler{
        service: service,
    }
}

func (h *HttpHandler) getID(ctx *gin.Context) (int64, error) {
    idStr := ctx.Param("id")
    idInt, err := strconv.Atoi(idStr)
    if err != nil {
        return 0, err
    }
    if idInt == 0 {
        return 0, errors.New("无效的id")
    }
    return int64(idInt), err
}
